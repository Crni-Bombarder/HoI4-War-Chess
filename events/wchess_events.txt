add_namespace = wchess_events

# Challenge accepted
country_event = {
    id = wchess_events.1
    title = wchess_events.1.t
    desc = wchess_events.1.desc

    is_triggered_only = yes
    timeout_days = 5

    option = {
        name = wchess_events.1.a
    }
    option = {
        name = wchess_events.1.b
    }
    option = {
        name = wchess_events.1.c
    }
}

# Challenge refused
country_event = {
    id = wchess_events.2
    title = wchess_events.2.t
    desc = wchess_events.2.desc

    is_triggered_only = yes
    timeout_days = 5

    option = {
        name = wchess_events.2.a
    }
    option = {
        log = "[ROOT.GetName]"
        name = wchess_events.2.b
        every_other_country = {
            if = {
                limit = {
                    check_variable = {
                        var = THIS.wchess_challenged
                        value = PREV
                        compare = equals
                    }
                }
                country_event = wchess_events.4
            } else = {
                set_variable = {
                    var = THIS.wchess_shamed
                    value = ROOT.wchess_challenger
                }
                country_event = wchess_events.3
            }
        }

        country_event = wchess_events.5
    }
}

# Someone has been shamed
news_event = {
    id = wchess_events.3
    title = wchess_events.3.t
    desc = wchess_events.3.desc

    is_triggered_only = yes

    option = {
        name = wchess_events.3.a
    }
}

# You have been shamed
news_event = {
    id = wchess_events.4
    title = wchess_events.4.t
    desc = wchess_events.4.desc

    is_triggered_only = yes

    option = {
        log = "Shamed : [ROOT.GetName]"
        name = wchess_events.4.a
    }
}

# You have shamed someone
news_event = {
    id = wchess_events.5
    title = wchess_events.5.t
    desc = wchess_events.5.desc

    is_triggered_only = yes

    option = {
        log = "[ROOT.GetName] Has shamed"
        name = wchess_events.5.a
    }
}
